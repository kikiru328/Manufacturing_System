# Vision AI 기반 제조 자동화 검수 시스템

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://python.org)
[![PyTorch](https://img.shields.io/badge/PyTorch-1.12%2B-red.svg)](https://pytorch.org)
[![YOLOv5](https://img.shields.io/badge/YOLOv5-Latest-green.svg)](https://github.com/ultralytics/yolov5)
[![OpenCV](https://img.shields.io/badge/OpenCV-4.5%2B-orange.svg)](https://opencv.org)
[![PyQt5](https://img.shields.io/badge/PyQt5-5.15%2B-purple.svg)](https://www.riverbankcomputing.com/software/pyqt/)

> **커스터마이징 간편식 제조 현장의 검수 자동화를 통한 불량률 감소 및 생산성 향상 솔루션**

## 주요성과

| 지표 | 달성값 | 설명 |
|------|--------|------|
| **객체 탐지 정확도** | 0.65 → 0.80+ | mAP@0.5 기준 23% 성능 향상 |
| **실시간 처리 성능** | <1초 지연 | YOLOv5s + DeepSORT 최적화 |
| **다중 웹캠 지원** | 최대 4개 | 멀티스레딩 기반 병렬 처리 |
| **현장 적용률** | 90% | 1인 개발, 제조진 검수 협업 |

## 문제 해결

커스터마이징 간편식 제조 과정에서 발생하는 핵심 문제들을 YOLO + DeepSORT 기반 실시간 객체 탐지 및 추적 시스템으로 해결했습니다.

### 핵심 해결 문제

**문제**: 스티커 라벨링 비효율성과 옵션 누락으로 인한 불량률 증가
- 하루 100-200개 제조 시 옵션 누락 다수 발생
- 수작업 카운팅 오류 및 복잡한 제조 목록 순서 추적 어려움
- 보안망 환경에서 웹 기반 시스템 사용 불가

**해결**: 4단계 제조 카운터 기반 실시간 용기 카운팅 및 옵션 안내 자동화 시스템 구축

## 시스템 아키텍처

### 전체 구조
![Image](https://github.com/user-attachments/assets/ec3dfe22-39a2-425b-a663-81b99fbe7383)

### 세부 구조
![Image](https://github.com/user-attachments/assets/6d3c4dc6-efea-4dd3-8fb5-8cb2f4b54f15)

### 핵심 컴포넌트

**AI 모델 파이프라인**
- **YOLOv5s**: 경량화된 실시간 용기 객체 탐지 (빈 용기~완성품 전 단계)
- **DeepSORT**: 개별 용기 ID 추적 및 이동 경로 분석
- **OJB (Object Judgement Baseline)**: 화면 50% 지점 가상 중앙선 설정

**데이터 처리 시스템**
- **멀티스레딩**: 각 웹캠별 독립 스레드 처리로 병렬 처리 구현
- **방향성 필터링**: 좌→우 단방향 카운팅으로 역방향 오카운팅 방지
- **실시간 동기화**: 4단계 제조 카운터 (용기 → 채소 → 옵션 → 포장) 통합 관리

## 기술적 문제 해결 예시

### 전략 1: 제조 환경 변화에 robust한 객체 탐지

**도전**: 조명 변화, 재료 적재 상태, 제조 환경에 따른 탐지 정확도 저하 (0.65)

**해결 과정**:
- 실제 제조 환경의 다양한 조건을 반영한 50개 영상 데이터 수집
- 프레임별 분석을 통한 약 400장 BBox 수작업 라벨링
- 제조진과의 협업을 통한 도메인 전문가 검수로 라벨링 품질 향상
- 다양한 조명 조건과 재료 상태를 포함한 데이터셋 구축

**결과**: 정확도 0.8+ 달성 (mAP@0.5 기준, 23% 이상 성능 개선)

### 전략 2: 실시간 객체 추적 및 방향성 카운팅

**도전**: 제조 카운터에서 움직이는 용기의 정확한 카운팅 및 역방향 오카운팅 방지

**해결 과정**:
- YOLOv5s + DeepSORT 결합으로 경량화된 실시간 시스템 구현
- 웹캠 화면 50% 지점에 가상 중앙선 (OJB) 설정
- 객체 중심점 (OCP)이 중앙선 교차 시 카운팅 트리거 발생
- 좌→우 방향만 카운팅하는 단방향 제한 로직 구현
- 객체가 화면에서 사라지면 추적 ID 자동 해제

**결과**: 초기 1초 딜레이 해결 및 정확한 방향성 카운팅 달성

## 문제 해결

### 일반적 문제

- **보안망 환경 제약** → PyQt5 + Pyinstaller로 독립 실행 .exe 패키징하여 네트워크 의존성 제거
- **비개발자 사용성 문제** → 직관적 색상 기반 UI 설계 (옵션 포함: 초록색, 미포함: 빨간색)
- **다양한 환경 조건** → 실제 제조 환경 데이터 기반 robust 모델 구축
- **복잡한 옵션 관리** → 실시간 제조 진행 상황 시각화 및 다음 단계 안내 시스템

### 성능 최적화 방법

- **모델 경량화**: YOLOv5s 사용으로 실시간 처리 보장 (<1초 지연)
- **멀티스레딩**: 4개 웹캠 병렬 처리로 전체 제조 라인 모니터링
- **메모리 관리**: 객체 ID 자동 해제로 메모리 누수 방지
- **추적 최적화**: DeepSORT 파라미터 튜닝으로 ID 스위칭 최소화
- **리소스 분배**: GPU/CPU 효율적 분배로 멀티 스트림 안정성 확보

## 확장 가능성

- **다중 제조 라인 지원**: 현재 단일 라인에서 여러 제조 라인 동시 모니터링으로 확장 가능
- **실시간 분석 대시보드**: 제조 데이터 기반 생산성 분석 및 최적화 기능 추가
- **클라우드 연동**: 향후 네트워크 환경 개선 시 클라우드 기반 중앙 관리 시스템 연동
- **AI 모델 업그레이드**: 최신 YOLO 모델 적용으로 정확도 추가 향상 가능
- **오프라인 매장 확장**: 향후 오프라인 매장 운영 시 즉시 적용 가능한 검증된 시스템

## GUI Demo
![image](https://github.com/user-attachments/assets/0e0dd884-6ae9-49b5-9289-a21275ed31f7)

![image](https://github.com/user-attachments/assets/c7f97723-cfab-4f60-815e-61be728d875d)


## 비즈니스 임팩트

**효율성 향상**
- 스티커 라벨링 작업 완전 제거로 작업 시간 단축
- 수작업 카운팅 오류 방지로 재작업 비용 절감
- 제조진 인지 부담 감소로 작업 집중도 향상

**품질 관리 강화**
- 옵션 누락률 대폭 감소 (하루 100-200개 제조 시 누락 사례 최소화)
- 실시간 모니터링으로 제조 품질 일관성 확보
- 고객 CS 감소 및 고객 만족도 향상

**현장 적용성**
- 보안망 환경에서도 독립 실행 가능한 시스템 설계
- 비개발자도 직관적으로 사용 가능한 사용자 친화적 인터페이스
- Excel/CSV 기반 제조 계획 입력으로 기존 워크플로우 연동

**기술적 가치**
- 온프레미스 AI 시스템 구축 경험 및 노하우 축적
- 실제 제조 환경의 제약 조건을 고려한 실용적 AI 솔루션 개발
- 다양한 제조 환경에 적용 가능한 모듈화된 아키텍처 설계
